<link rel="stylesheet" href="${basePath}/resources/common/css/antdesign.css">
 
 <section class="content-header">
      <ol class="breadcrumb">
        <li><a href="../starter.html"><i class="fa fa-dashboard"></i> 主页</a></li>
        <li class="active">总览</li>
      </ol>
    </section>
	<br>
    <!-- Main content -->
    <section class="content">
    <div class="row">
    <div class="col-md-4 col-sm-6 col-xs-12">
          <div class="info-box">
            <span class="info-box-icon bg-aqua"><i class="ion ion-ios-gear-outline"></i></span>
			<br>
            <div class="info-box-content" >
              <h4 align="center" >B2B门口正常访问</h4>
            </div>
          </div>
    </div>
        <div class="col-md-4 col-sm-6 col-xs-12">
          <div class="info-box">
            <span class="info-box-icon bg-aqua"><i class="ion ion-ios-gear-outline"></i></span>
			<br>
            <div class="info-box-content">
              <h4 align="center" >支付网关正常访问</h4>
            </div>
          </div>
    </div>
        <div class="col-md-4 col-sm-6 col-xs-12">
          <div class="info-box">
            <span class="info-box-icon bg-aqua"><i class="ion ion-ios-gear-outline"></i></span>
			<br>
            <div class="info-box-content">
              <h4 align="center" >仓库系统访问</h4>
            </div>
          </div>
    </div>
    </div>
    <div class="row">
    	<div class="col-md-6">
    	<div class="box box-primary">
            <div class="box-header with-border">
              <i class="fa fa-bar-chart-o"></i>

              <h3 class="box-title">响应时间</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <div class="box-body">
              <div id="line-chart" style="height: 300px;"></div>
            </div>
            <!-- /.box-body-->
          </div>
          </div>
          <div class="col-md-6">
           <div class="box box-danger">
            <div class="box-header with-border">
              <h3 class="box-title">exception排行</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <div class="box-body">
              <canvas id="pieChart" style="height:250px"></canvas>
            </div>
            <!-- /.box-body -->
          </div>
          </div>
    </div>
	
	
	      <div class="row">
      <div class="col-md-8">
      	<div class="box box-success">
            <div class="box-header with-border">
              <h3 class="box-title">当前订单监控</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <div class="row">
                <div class="col-md-9 col-sm-8">
                  <div class="pad">
                    <!-- Map will be created here -->
                    <div id="china-map-markers" style="height: 450px;"></div>
                  </div>
                </div>
                <!-- /.col -->
                <div class="col-md-3 col-sm-4">
                  <div class="pad box-pane-right bg-green" style="min-height: 150px">
                    <div class="description-block margin-bottom">
                      <h2 class="">${正常订单!}</h2>
                      <span class="description-text">正常订单</span>
                    </div>
                    </div>
                    
                    <!-- /.description-block -->
                    <div class="pad box-pane-right bg-yellow" style="min-height: 150px">
                    <div class="description-block margin-bottom">
                      <h2 class="">${预警订单!}</h2>
                      <span class="description-text">预警订单</span>
                    </div>
                    </div>
                    <!-- /.description-block -->
                    
                    <div class="pad box-pane-right bg-red" style="min-height: 150px">
                    <div class="description-block">
                      
                      <a href="javascript:void(0);" onclick="refleshChina()" style="color:black"><h2 class="">${警告订单!}</h2></a>
                      <span class="description-text">警告订单</span>
                    </div>
                    <!-- /.description-block -->
                  </div>
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>
            <!-- /.box-body -->
          </div>
      </div>

		<div class="col-md-4">
          <div class="box box-default">
            <div class="box-header with-border">
              <i class="fa fa-bullhorn"></i>

              <h3 class="box-title">当日购物车与产品监控</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <div class="callout callout-danger">
                <h4>产品状态异常</h4>

                <p>当日存在9条产品异常记录</p>
                  <a href="#" onClick="goProductStatus()" class="small-box-footer">
                                                   查询产品状态监控 <i class="fa fa-arrow-circle-right"></i>
            </a>
              </div>
              <div class="callout callout-success">
                <h4>购物车状态正常</h4>

                <p> </p>
                <a href="#" onClick="goCartStatus()" class="small-box-footer">
              	查询购物车状态监控 <i class="fa fa-arrow-circle-right"></i>
              </div>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>


      </div>
      
      
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-header">
              <h3 class="box-title">${province!}警告订单列表</h3>
			<!-- 
              <div class="box-tools">
                <div class="input-group input-group-sm" style="width: 150px;">
                  <input type="text" name="table_search" class="form-control pull-right" placeholder="Search">

                  <div class="input-group-btn">
                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                  </div>
                </div>
              </div>
               -->
            </div>
            <!-- /.box-header -->
            <div class="box-body table-responsive no-padding">
            
         <div class="ant-card ant-card-wider-padding ant-card-padding-transition" style="margin-bottom: 24px;">
           <div class="ant-card-body">
           
           <#list orderStatusList as orderStatusMonitorDTO>
            <div>
             
             <div class="ant-row">
				<div class="ant-col-xs-8 ant-col-sm-8 ant-col-md-8 ant-col-lg-8 ant-col-xl-8" style="color:black;background:#F5F5F5;height:25px" align="center" >
	            	单号：<a href="javascript:void(0);" onclick="refleshOperate('${orderStatusMonitorDTO.orderCode}');" style="color:black">${orderStatusMonitorDTO.orderCode}</a>
				</div>
				<div class="ant-col-xs-8 ant-col-sm-8 ant-col-md-8 ant-col-lg-8 ant-col-xl-8" style="color:black;background:#F5F5F5;height:25px" align="center" >
					用户：${orderStatusMonitorDTO.user}
				</div>
				<div class="ant-col-xs-8 ant-col-sm-8 ant-col-md-8 ant-col-lg-8 ant-col-xl-8" style="color:black;background:#F5F5F5;height:25px" align="center" >
					总价：${orderStatusMonitorDTO.totalPrice}
				</div>
			</div>
             
             
          <div  class="ant-steps ant-steps-horizontal ant-steps-label-vertical ant-steps-dot">
             
             <div style="display:none" class="ant-steps-item <#if orderStatusMonitorDTO.cancelFlag == 'true'> ant-steps-item-wait</#if><#if orderStatusMonitorDTO.payStatus == '' || orderStatusMonitorDTO.payStatus == 'NOMARL'> ant-steps-item-finish</#if><#if orderStatusMonitorDTO.payStatus == 'YUJING'> ant-steps-item-orderyujing</#if> ">
               <div class="ant-steps-item-tail"></div>
               <div class="ant-steps-item-icon">
                <span class="ant-steps-icon"><span class="ant-steps-icon-dot"></span></span>
               </div>
               <div class="ant-steps-item-content">
                <div class="ant-steps-item-title">
                 <a href="javascript:void(0);" onclick="refleshOperateByOrderStatus('${orderStatusMonitorDTO.orderCode}','Created');"
                 style="color:black"></a>
                </div>
               </div>
              </div>
            
              
              <div class="ant-steps-item <#if orderStatusMonitorDTO.cancelFlag == 'true'> ant-steps-item-wait</#if><#if orderStatusMonitorDTO.payStatus == '' || orderStatusMonitorDTO.payStatus == 'NOMARL'> ant-steps-item-finish</#if><#if orderStatusMonitorDTO.payStatus == 'YUJING'> ant-steps-item-orderyujing</#if> ">
               <div class="ant-steps-item-tail"></div>
               <div class="ant-steps-item-icon">
                <span class="ant-steps-icon"><span class="ant-steps-icon-dot"></span></span>
               </div>
               <div class="ant-steps-item-content">
                <div class="ant-steps-item-title">
                 <a href="javascript:void(0);" onclick="refleshOperateByOrderStatus('${orderStatusMonitorDTO.orderCode}','Created');" style="color:black">创建</a>
                 <#if orderStatusMonitorDTO.cancelFlag == 'true'>(已取消)</#if>
                </div>
                <div class="ant-steps-item-description">
                 <div class="textSecondary___3ifTy stepDescription___2JfeS">
                  <div>
                   ${orderStatusMonitorDTO.createTime}
                  </div>
                 </div>
                </div>
               </div>
              </div>
              
              <div class="ant-steps-item  <#if orderStatusMonitorDTO.sendStatus == 'NOMARL' > ant-steps-item-finish</#if>
              <#if orderStatusMonitorDTO.payStatus == 'NOMARL' && orderStatusMonitorDTO.sendStatus == ''> ant-steps-item-finish</#if>
              <#if orderStatusMonitorDTO.payStatus == ''|| orderStatusMonitorDTO.payStatus == 'YUJING'> ant-steps-item-wait</#if><#if orderStatusMonitorDTO.sendStatus == 'YUJING' > ant-steps-item-orderyujing</#if><#if orderStatusMonitorDTO.sendStatus == 'JINGGAO' > ant-steps-item-orderjinggao</#if>">
               <div class="ant-steps-item-tail"></div>
               <div class="ant-steps-item-icon">
                <span class="ant-steps-icon"><span class="ant-steps-icon-dot"></span></span>
               </div>
               <div class="ant-steps-item-content">
                <div class="ant-steps-item-title">
               <#if orderStatusMonitorDTO.payStatus == 'NOMARL' >
              	<a href="javascript:void(0);" onclick="refleshOperateByOrderStatus('${orderStatusMonitorDTO.orderCode}','Payed');" style="color:black">已支付</a>
              	</#if>
               <#if orderStatusMonitorDTO.payStatus == 'YUJING' >
              	待支付
              	</#if>
                </div>
                <div class="ant-steps-item-description">
                 <div class="textSecondary___3ifTy stepDescription___2JfeS">
                  <div>
                   ${orderStatusMonitorDTO.payTime}
                  </div>
                 </div>
                </div>
               </div>
              </div>
              
              <div class="ant-steps-item  <#if orderStatusMonitorDTO.receviedStatus == 'NOMARL' > ant-steps-item-finish</#if>
              <#if orderStatusMonitorDTO.sendStatus == 'NOMARL' && orderStatusMonitorDTO.receviedStatus == ''> ant-steps-item-finish</#if>
              <#if orderStatusMonitorDTO.sendStatus == ''|| orderStatusMonitorDTO.sendStatus == 'YUJING' || orderStatusMonitorDTO.sendStatus == 'JINGGAO'> ant-steps-item-wait</#if><#if orderStatusMonitorDTO.receviedStatus == 'YUJING' > ant-steps-item-orderyujing</#if><#if orderStatusMonitorDTO.receviedStatus == 'JINGGAO' > ant-steps-item-orderjinggao</#if>">
               <div class="ant-steps-item-tail"></div>
               <div class="ant-steps-item-icon">
                <span class="ant-steps-icon"><span class="ant-steps-icon-dot"></span></span>
               </div>
               <div class="ant-steps-item-content">
                <div class="ant-steps-item-title">
               <#if orderStatusMonitorDTO.payStatus == 'YUJING' >
              	
               </#if>
               <#if orderStatusMonitorDTO.sendStatus == 'NOMARL' >
              	<a href="javascript:void(0);" onclick="refleshOperateByOrderStatus('${orderStatusMonitorDTO.orderCode}','Sent');" style="color:black">已发货</a>
              </#if>
               <#if orderStatusMonitorDTO.sendStatus == 'YUJING' >
              	待发货
              </#if>
              <#if orderStatusMonitorDTO.sendStatus == 'JINGGAO' >
             	 待发货
              </#if>
                </div>
                <div class="ant-steps-item-description">
                 <div class="textSecondary___3ifTy stepDescription___2JfeS">
                  <div>
                   ${orderStatusMonitorDTO.sendTime}
                  </div>
                 </div>
                </div>
               </div>
              </div>
              
              <div class="ant-steps-item <#if orderStatusMonitorDTO.receviedStatus == 'NOMARL' > ant-steps-item-process<#else> ant-steps-item-wait</#if>">
               <div class="ant-steps-item-tail"></div>
               <div class="ant-steps-item-icon">
                <span class="ant-steps-icon"><span class="ant-steps-icon-dot"></span></span>
               </div>
               <div class="ant-steps-item-content">
                <div class="ant-steps-item-title">
                 
               <#if orderStatusMonitorDTO.payStatus == 'YUJING' >
              	
               </#if>
               <#if orderStatusMonitorDTO.receviedStatus == 'YUJING' >
              	待签收
              </#if>
              <#if orderStatusMonitorDTO.receviedStatus == 'JINGGAO' >
              	待签收
              </#if>
              <#if orderStatusMonitorDTO.receviedStatus == 'NOMARL' >
             	 <a href="javascript:void(0);" onclick="refleshOperateByOrderStatus('${orderStatusMonitorDTO.orderCode}','Recevied');" style="color:black">已签收</a>
              </#if>
                </div>
                <div class="ant-steps-item-description">
                 <div class="textSecondary___3ifTy stepDescription___2JfeS">
                  <div>
                   ${orderStatusMonitorDTO.receviedTime}
                  </div>
                 </div>
                </div>
               </div>
              </div>
             </div>
             
             
             </#list> 
             
             

            </div>
           </div>
          </div>
          
          
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
      </div>
    </section>
    
      
    </section>
    
    
        <script>
	   //map
	   var dataStatus =${jinggaoData!};
	               $('#china-map-markers').vectorMap({
	              	map: 'cn_mill',
	              	normalizeFunction: 'polynomial',
	                  hoverOpacity     : 0.7,
	                  hoverColor       : false,
	                  backgroundColor  : 'transparent',
	                  regionStyle      : {
	                    initial      : {
	                      fill            : 'rgba(210, 214, 222, 1)',
	                      'fill-opacity'  : 1,
	                      stroke          : 'none',
	                      'stroke-width'  : 0,
	                      'stroke-opacity': 1
	                    },
	                    hover        : {
	                      'fill-opacity': 0.7,
	                      cursor        : 'pointer'
	                    },
	                    selected     : {
	                      fill: 'yellow'
	                    },
	                    selectedHover: {}
	                  },
	                  markerStyle      : {
	                    initial: {
	                      fill  : '#DD4B39',
	                      stroke: '#111'
	                    }
	                  },
	              	markersSelectable: true,  
	              	markersSelectableOne:true,
	              	onMarkerSelected: function(Event,  code,  isSelected,  selectedMarkers){
	                     if(isSelected == 1){
	              			$.each(dataStatus, function (i, items) {
	              			if (code == i) {
	              				loadPage("/Monitor/poc/statusoverview?province="+encodeURI(encodeURI(items.name)));
	              			}
	              		});
	              		}
	              		
	                  },
	                  markers          : dataStatus
	              	 
	              	 });
          function refleshChina(){
        	  loadPage("/Monitor/poc/statusoverview"); 
          }
          
          function refleshOperate(code){
        	  loadPage("/Monitor/poc/orderStatus/"+code); 
          }
          
          function goProductStatus(){
        	  loadPage('/Monitor/poc/productStatus');
          }
          
          function goCartStatus(){
        	  loadPage('/Monitor/poc/cartStatus');
          }
          
          $("div.jvectormap-label").style.display="none";

</script>